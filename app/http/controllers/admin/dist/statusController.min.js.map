{"version":3,"sources":["statusController.js"],"names":["Order","require","statusController","update","req","res","updateOne","body","orderId","status","err","data","app","get","emit","id"],"mappings":"aACA,IAAMA,MAAQC,QAAQ,yBAEtB,SAASC,mBAAT,MAASA,CACLC,OADKD,SACEE,EAAAC,GAAAL,MAAAM,UACIF,CAAAA,IAAKC,EAAKE,KAAAC,SAAA,CAAAC,OAAAL,EAAAG,KAAAE,QAAA,SAAAC,EAAAC,GACPL,OAAAA,GAA8EF,EAAAQ,IAAAC,IAAA,gBACxEC,KAAA,eAAA,CAAAC,GAAAX,EAAAG,KAAAC,QAAAC,OAAAL,EAAAG,KAAAE,SADmBD,EAAAA,SAAAA,qBAMSO,OAAAA,QAAOb","file":"statusController.min.js","sourcesContent":["\r\nconst Order = require('../../../models/order')\r\n\r\nfunction statusController() {\r\n    return {\r\n        update(req, res) {\r\n            Order.updateOne({_id: req.body.orderId}, { status: req.body.status }, (err, data)=> {\r\n                if(err) {\r\n                    return res.redirect('/admin/orders')\r\n                }\r\n                // Emit event \r\n                const eventEmitter = req.app.get('eventEmitter')\r\n                eventEmitter.emit('orderUpdated', { id: req.body.orderId, status: req.body.status })\r\n                return res.redirect('/admin/orders')\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = statusController"]}