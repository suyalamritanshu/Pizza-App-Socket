{"version":3,"sources":["statusController.js"],"names":["Order","require","statusController","update","req","res","updateOne","_id","body","orderId","status","err","data","redirect","eventEmitter","app","get","emit","id","module","exports"],"mappings":";;AACA,IAAMA,KAAK,GAAGC,OAAO,CAAC,uBAAD,CAArB;;AAEA,SAASC,gBAAT,GAA4B;AACxB,SAAO;AACHC,IAAAA,MADG,kBACIC,GADJ,EACSC,GADT,EACc;AACbL,MAAAA,KAAK,CAACM,SAAN,CAAgB;AAACC,QAAAA,GAAG,EAAEH,GAAG,CAACI,IAAJ,CAASC;AAAf,OAAhB,EAAyC;AAAEC,QAAAA,MAAM,EAAEN,GAAG,CAACI,IAAJ,CAASE;AAAnB,OAAzC,EAAsE,UAACC,GAAD,EAAMC,IAAN,EAAc;AAChF,YAAGD,GAAH,EAAQ;AACJ,iBAAON,GAAG,CAACQ,QAAJ,CAAa,eAAb,CAAP;AACH,SAH+E,CAIhF;;;AACA,YAAMC,YAAY,GAAGV,GAAG,CAACW,GAAJ,CAAQC,GAAR,CAAY,cAAZ,CAArB;AACAF,QAAAA,YAAY,CAACG,IAAb,CAAkB,cAAlB,EAAkC;AAAEC,UAAAA,EAAE,EAAEd,GAAG,CAACI,IAAJ,CAASC,OAAf;AAAwBC,UAAAA,MAAM,EAAEN,GAAG,CAACI,IAAJ,CAASE;AAAzC,SAAlC;AACA,eAAOL,GAAG,CAACQ,QAAJ,CAAa,eAAb,CAAP;AACH,OARD;AASH;AAXE,GAAP;AAaH;;AAEDM,MAAM,CAACC,OAAP,GAAiBlB,gBAAjB","sourcesContent":["\r\nconst Order = require('../../../models/order')\r\n\r\nfunction statusController() {\r\n    return {\r\n        update(req, res) {\r\n            Order.updateOne({_id: req.body.orderId}, { status: req.body.status }, (err, data)=> {\r\n                if(err) {\r\n                    return res.redirect('/admin/orders')\r\n                }\r\n                // Emit event \r\n                const eventEmitter = req.app.get('eventEmitter')\r\n                eventEmitter.emit('orderUpdated', { id: req.body.orderId, status: req.body.status })\r\n                return res.redirect('/admin/orders')\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = statusController"],"file":"statusController.dev.js"}