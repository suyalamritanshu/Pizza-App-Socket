{"version":3,"sources":["stripe.js"],"names":["_stripeJs","require","_apiService","_CardWidget","initStripe","stripe","card","paymentType","paymentForm","regeneratorRuntime","async","_context2","prev","next","awrap","loadStripe","sent","document","querySelector","abrupt","addEventListener","e","target","value","CardWidget","mount","destroy","formData","formObject","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_step$value","key","token","_context","preventDefault","FormData","undefined","entries","Symbol","iterator","done","_slicedToArray","t0","finish","placeOrder","createToken","stripeToken","id","stop"],"mappings":"kGAAA,IAAAA,UAAAC,QAAA,qBACCC,YAAAD,QAAA,gBACAE,YAAAF,QAAA,snBAEM,SAAeG,aAAf,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAE,KAAA,EAAAJ,mBAAAK,OACkB,EAAAd,UAAAe,YAAW,gHAD7B,KAAA,EAAA,GACGV,EADHM,EAAAK,KAECV,EAAO,KAFRC,EAAAU,SAAAC,cAAA,gBAAA,CAAAP,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAQ,OAAA,UAAA,KAAA,EAMHZ,EAAAa,iBAAA,SAAA,SAAAC,GAEA,SAAAA,EAAAC,OAAAC,OAEAjB,EAAA,IAAAkB,YAAAA,WAAAnB,IACAoB,QAEAnB,EAAAoB,aAOAlB,EAAAS,SAAAC,cAAA,mBAGAV,EAAAY,iBAAA,SAAA,SAAAC,GAAA,IAAAM,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAZ,EAAAa,EAAA,OAAA3B,mBAAAC,MAAA,SAAA2B,GAAA,OAAA,OAAAA,EAAAzB,KAAAyB,EAAAxB,MAAA,KAAA,EA2BI,IA1BJQ,EAAAiB,iBAwBQX,EAAW,IAAIY,SAAS/B,GAtB1BD,EAAcU,GAHpBa,IAAAD,GAAA,GAAAE,OAAAS,EAAAH,EAAAzB,KAAA,EA2BIoB,EAAwBL,EAASc,UAAjCC,OAAAC,cAAAd,GAAAI,EAAAD,EAAAnB,QAAA+B,MAAAf,GAAA,EAA4CK,EAAAW,eAAAZ,EAAAV,MAAA,GAAnCY,EAAmCD,EAAA,GAA9BX,EAA8BW,EAAA,GAlD7CN,EA2BCrB,GA3BDgB,EAuBHc,EAAAxB,KAAA,GAAA,MAAA,KAAA,GAAAwB,EAAAzB,KAAA,GAAAyB,EAAAS,GAAAT,EAAA,MAAA,GAAAP,GAAA,EAAAC,EAAAM,EAAAS,GAAA,KAAA,GAAAT,EAAAzB,KAAA,GAAAyB,EAAAzB,KAAA,GAAAiB,GAAA,MAAAG,EAAA,QAAAA,EAAA,SAAA,KAAA,GAAA,GAAAK,EAAAzB,KAAA,GAAAkB,EAAA,MAAAC,EAAAM,EAAAxB,KAAA,GAAA,MAAA,KAAA,GAAA,OAAAwB,EAAAU,OAAA,IAAA,KAAA,GAAA,OAAAV,EAAAU,OAAA,IAAA,KAAA,GAAA,GAvBGzC,EAuBH,CAAA+B,EAAAxB,KAAA,GAAA,MAAA,OAvBG,EAAAX,YAAA8C,YAAApB,GAuBHS,EAAAlB,OAAA,UAAA,KAAA,GAAA,OAAAkB,EAAAxB,KAAA,GAAAJ,mBAAAK,MASgBS,EAAT0B,eATP,KAAA,GASIb,EATJC,EAAArB,KAUQY,EAAAsB,YAAAd,EAAAe,IACD7C,EAAAA,YAAAA,YAAIsB,GAXX,KAAA,GAAA,IAAA,MAAA,OAAAS,EAAAe,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,GAAA,IAAA,CAAA,GAAA,CAAA,GAAA,QAvBG,KAAA,GAAA,IAAA,MAAA,OAAAzC,EAAAyC","file":"stripe.min.js","sourcesContent":["import { loadStripe } from '@stripe/stripe-js'\r\n import { placeOrder } from './apiService'\r\n import { CardWidget } from './CardWidget'\r\n\r\nexport async function initStripe() {\r\n    const stripe = await loadStripe('pk_test_51JNVh5SJGltiuqPoEEDjwoLb8Ny80cM6WB4noaHLtgXwlK5PjAQxKcGFYXM1JKALTezYPnxlSDOJ4A4EcwQaQ8ne0088XmW96T');\r\n    let card = null;\r\n    // function mountWidget() {\r\n    //         const elements = stripe.elements()\r\n\r\n    //     let style = {\r\n    //         base: {\r\n    //         color: '#32325d',\r\n    //         fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\r\n    //         fontSmoothing: 'antialiased',\r\n    //         fontSize: '16px',\r\n    //         '::placeholder': {\r\n    //             color: '#aab7c4'\r\n    //         }\r\n    //         },\r\n    //         invalid: {\r\n    //         color: '#fa755a',\r\n    //         iconColor: '#fa755a'\r\n    //         }\r\n    //     };\r\n\r\n    //     card = elements.create('card', { style, hidePostalCode: true })\r\n    //     card.mount('#card-element')\r\n    // }\r\n\r\n    const paymentType = document.querySelector('#paymentType');\r\n    if(!paymentType) {\r\n        return;\r\n    }\r\n    paymentType.addEventListener('change' , (e)=> {\r\n\r\n        if(e.target.value === 'card') {\r\n            // Display Widget\r\n           card = new CardWidget(stripe)\r\n           card.mount()\r\n        } else {\r\n            card.destroy()\r\n        }\r\n\r\n    })\r\n\r\n\r\n    // Ajax call\r\nconst paymentForm = document.querySelector('#payment-form');\r\nif(paymentForm) {\r\n    paymentForm.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        let formData = new FormData(paymentForm);\r\n        let formObject = {}\r\n        for(let [key, value] of formData.entries()) {\r\n            formObject[key] = value\r\n        }\r\n\r\n        if (!card) {\r\n            // Ajax\r\n            placeOrder(formObject);\r\n            return;\r\n        }\r\n\r\n        const token = await card.createToken()\r\n        formObject.stripeToken = token.id;\r\n        placeOrder(formObject);\r\n\r\n\r\n        // // Verify card\r\n        // stripe.createToken(card).then((result) => {\r\n        //     formObject.stripeToken = result.token.id;\r\n        //     placeOrder(formObject);\r\n        // }).catch((err) => {\r\n        //     console.log(err)\r\n        // })\r\n\r\n    })\r\n}\r\n}"]}