{"version":3,"sources":["stripe.js"],"names":["initStripe","stripe","card","paymentType","document","querySelector","addEventListener","e","target","value","CardWidget","mount","destroy","paymentForm","preventDefault","formData","FormData","formObject","entries","key","createToken","token","stripeToken","id"],"mappings":";;;;;;;AAAA;;AACC;;AACA;;;;;;;;;;AAEM,SAAeA,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CACkB,0BAAW,6GAAX,CADlB;;AAAA;AACGC,UAAAA,MADH;AAECC,UAAAA,IAFD,GAEQ,IAFR,EAGH;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AAEMC,UAAAA,WA1BH,GA0BiBC,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CA1BjB;;AAAA,cA2BCF,WA3BD;AAAA;AAAA;AAAA;;AAAA;;AAAA;AA8BHA,UAAAA,WAAW,CAACG,gBAAZ,CAA6B,QAA7B,EAAwC,UAACC,CAAD,EAAM;AAE1C,gBAAGA,CAAC,CAACC,MAAF,CAASC,KAAT,KAAmB,MAAtB,EAA8B;AAC1B;AACDP,cAAAA,IAAI,GAAG,IAAIQ,sBAAJ,CAAeT,MAAf,CAAP;AACAC,cAAAA,IAAI,CAACS,KAAL;AACF,aAJD,MAIO;AACHT,cAAAA,IAAI,CAACU,OAAL;AACH;AAEJ,WAVD,EA9BG,CA2CH;;AACEC,UAAAA,WA5CC,GA4CaT,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CA5Cb;;AA6CP,cAAGQ,WAAH,EAAgB;AACZA,YAAAA,WAAW,CAACP,gBAAZ,CAA6B,QAA7B,EAAuC,iBAAOC,CAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACnCA,sBAAAA,CAAC,CAACO,cAAF;AACIC,sBAAAA,QAF+B,GAEpB,IAAIC,QAAJ,CAAaH,WAAb,CAFoB;AAG/BI,sBAAAA,UAH+B,GAGlB,EAHkB;AAAA;AAAA;AAAA;AAAA;;AAInC,uCAAwBF,QAAQ,CAACG,OAAT,EAAxB,uHAA4C;AAAA,sEAAnCC,GAAmC,mBAA9BV,KAA8B;AACxCQ,wBAAAA,UAAU,CAACE,GAAD,CAAV,GAAkBV,KAAlB;AACH;;AANkC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,0BAQ9BP,IAR8B;AAAA;AAAA;AAAA;;AAS/B;AACA,kDAAWe,UAAX;AAV+B;;AAAA;AAAA;AAAA,sDAcff,IAAI,CAACkB,WAAL,EAde;;AAAA;AAc7BC,sBAAAA,KAd6B;AAenCJ,sBAAAA,UAAU,CAACK,WAAX,GAAyBD,KAAK,CAACE,EAA/B;AACA,kDAAWN,UAAX,EAhBmC,CAmBnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAzBmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAvC;AA4BH;;AA1EM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { loadStripe } from '@stripe/stripe-js'\r\n import { placeOrder } from './apiService'\r\n import { CardWidget } from './CardWidget'\r\n\r\nexport async function initStripe() {\r\n    const stripe = await loadStripe('pk_test_51JNVh5SJGltiuqPoEEDjwoLb8Ny80cM6WB4noaHLtgXwlK5PjAQxKcGFYXM1JKALTezYPnxlSDOJ4A4EcwQaQ8ne0088XmW96T');\r\n    let card = null;\r\n    // function mountWidget() {\r\n    //         const elements = stripe.elements()\r\n\r\n    //     let style = {\r\n    //         base: {\r\n    //         color: '#32325d',\r\n    //         fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\r\n    //         fontSmoothing: 'antialiased',\r\n    //         fontSize: '16px',\r\n    //         '::placeholder': {\r\n    //             color: '#aab7c4'\r\n    //         }\r\n    //         },\r\n    //         invalid: {\r\n    //         color: '#fa755a',\r\n    //         iconColor: '#fa755a'\r\n    //         }\r\n    //     };\r\n\r\n    //     card = elements.create('card', { style, hidePostalCode: true })\r\n    //     card.mount('#card-element')\r\n    // }\r\n\r\n    const paymentType = document.querySelector('#paymentType');\r\n    if(!paymentType) {\r\n        return;\r\n    }\r\n    paymentType.addEventListener('change' , (e)=> {\r\n\r\n        if(e.target.value === 'card') {\r\n            // Display Widget\r\n           card = new CardWidget(stripe)\r\n           card.mount()\r\n        } else {\r\n            card.destroy()\r\n        }\r\n\r\n    })\r\n\r\n\r\n    // Ajax call\r\nconst paymentForm = document.querySelector('#payment-form');\r\nif(paymentForm) {\r\n    paymentForm.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        let formData = new FormData(paymentForm);\r\n        let formObject = {}\r\n        for(let [key, value] of formData.entries()) {\r\n            formObject[key] = value\r\n        }\r\n\r\n        if (!card) {\r\n            // Ajax\r\n            placeOrder(formObject);\r\n            return;\r\n        }\r\n\r\n        const token = await card.createToken()\r\n        formObject.stripeToken = token.id;\r\n        placeOrder(formObject);\r\n\r\n\r\n        // // Verify card\r\n        // stripe.createToken(card).then((result) => {\r\n        //     formObject.stripeToken = result.token.id;\r\n        //     placeOrder(formObject);\r\n        // }).catch((err) => {\r\n        //     console.log(err)\r\n        // })\r\n\r\n    })\r\n}\r\n}"],"file":"stripe.dev.js"}