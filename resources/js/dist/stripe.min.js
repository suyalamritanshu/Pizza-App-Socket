"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initStripe=initStripe;var _stripeJs=require("@stripe/stripe-js"),_apiService=require("./apiService"),_CardWidget=require("./CardWidget");function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,r){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return t}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function initStripe(){var r,y,t,f;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap((0,_stripeJs.loadStripe)("pk_test_51JNVh5SJGltiuqPoEEDjwoLb8Ny80cM6WB4noaHLtgXwlK5PjAQxKcGFYXM1JKALTezYPnxlSDOJ4A4EcwQaQ8ne0088XmW96T"));case 2:if(r=e.sent,y=null,t=document.querySelector("#paymentType")){e.next=7;break}return e.abrupt("return");case 7:t.addEventListener("change",function(e){"card"===e.target.value?(y=new _CardWidget.CardWidget(r)).mount():y.destroy()}),(f=document.querySelector("#payment-form"))&&f.addEventListener("submit",function(r){var t,n,a,i,o,u,c,s,l,p,d;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:for(r.preventDefault(),t=new FormData(f),n={},i=!(a=!0),o=void 0,e.prev=6,u=t.entries()[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)s=_slicedToArray(c.value,2),l=s[0],p=s[1],n[l]=p;e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),i=!0,o=e.t0;case 14:e.prev=14,e.prev=15,a||null==u.return||u.return();case 17:if(e.prev=17,i)throw o;e.next=20;break;case 20:return e.finish(17);case 21:return e.finish(14);case 22:if(y){e.next=25;break}return(0,_apiService.placeOrder)(n),e.abrupt("return");case 25:return e.next=27,regeneratorRuntime.awrap(y.createToken());case 27:d=e.sent,n.stripeToken=d.id,(0,_apiService.placeOrder)(n);case 30:case"end":return e.stop()}},null,null,[[6,10,14,22],[15,,17,21]])});case 10:case"end":return e.stop()}})}
//# sourceMappingURL=stripe.min.js.map
