{"version":3,"sources":["admin.js"],"names":["_axios","_interopRequireDefault","require","_moment","_noty","initAdmin","markup","orderTableBody","document","querySelector","orders","axios","get","headers","then","res","map","order","concat","_id","innerHTML","console","err","values","items","menuItem","item","name","qty","parsedItems","renderItems","customerId","address","status","createdAt","format","paymentStatus","join","generateMarkup","log","module","exports"],"mappings":"aAAA,IAAAA,OAAAC,uBAAAC,QAAA,UACAC,QAAAF,uBAAAC,QAAA,WADAE,MAAAH,uBAAAC,QAAA,iFACA,SAAAG,YAII,IAEIC,EAFEC,EAAiBC,SAASC,cAAc,mBAHlDC,EAAA,GAOIC,OAAAA,QAAMC,IAAI,gBAAiB,CAL9BC,QAASR,CACAE,mBAA0BE,oBAS7BK,KAAK,SAAAC,GALRJ,EAAAA,EAAMC,KACFC,EAkBC,SAJDH,GAKD,OAAAA,EAAAM,IAAA,SAAAC,GAIK,MAAA,gHAAAC,OAAAD,EAAAE,IAAA,mCAAAD,OAhBJX,SAAea,GAEfC,OADKC,OAAMC,OAAAC,GACXR,IAAA,SAAAS,GAVJ,MAAA,wBAAAP,OAiBkBO,EAASC,KAAKC,KAjBhC,OAAAT,OAiB4CO,EAASG,IAjBrD,6BAcQC,KAAAA,IASJC,CAAAb,EAAAO,OACI,gFAAAN,OAiDXD,EAAAc,WAAAJ,KAjDW,wDAAAT,OAOoCD,EAAMe,QAP1C,0QAAAd,OAW8DD,EAAME,IAXpE,4YAAAD,OAe4C,iBAAjBD,EAAMgB,OAA4B,WAAa,GAf1E,sHAAAf,OAiBkE,cAAjBD,EAAMgB,OAAyB,WAAa,GAjB7F,wHAAAf,OAmBiE,aAAjBD,EAAMgB,OAAwB,WAAa,GAnB3F,wHAAAf,OAqBkE,cAAjBD,EAAMgB,OAAyB,WAAa,GArB7F,2JAAAf,OAwBkE,cAAjBD,EAAMgB,OAAyB,WAAa,GAxB7F,izBAAAf,QAwCW,EAAAf,QAAA,SAAOc,EAAMiB,WAAWC,OAAO,WAxC1C,gGAAAjB,OA2CWD,EAAMmB,cAAgB,OAAS,WA3C1C,0DA+CDC,KAAK,IAtECC,CAAA5B,GACLH,EAAAa,UAAoBd,IAF5B,MACa,SAAAgB,GAIVR,QAAKyB,IAAAxB,KAsEZyB,OAAOC,QAAUpC","file":"admin.min.js","sourcesContent":["import axios from 'axios'\r\nimport moment from 'moment'\r\nimport Noty from 'noty'\r\n\r\n function initAdmin() {\r\n    const orderTableBody = document.querySelector('#orderTableBody')\r\n    let orders = []\r\n    let markup\r\n\r\n    axios.get('/admin/orders', {\r\n        headers: {\r\n            \"X-Requested-With\": \"XMLHttpRequest\"\r\n        }\r\n\r\n    }).then(res =>{\r\n        orders = res.data \r\n        markup = generateMarkup(orders)\r\n        orderTableBody.innerHTML = markup\r\n    }).catch(err =>{\r\n        console.log(err)\r\n    })\r\n\r\n    function renderItems(items) {\r\n        let parsedItems = Object.values(items)\r\n        return parsedItems.map((menuItem) => {\r\n            return `\r\n                <p>${ menuItem.item.name } - ${ menuItem.qty } pcs </p>\r\n            `\r\n        }).join('')\r\n      }\r\n\r\n    function generateMarkup(orders) {\r\n        return orders.map(order => {\r\n            return `\r\n                <tr>\r\n                <td class=\"border px-4 py-2 text-green-900\">\r\n                    <p>${ order._id }</p>\r\n                    <div>${ renderItems(order.items) }</div>\r\n                </td>\r\n                <td class=\"border px-4 py-2\">${ order.customerId.name }</td>\r\n                <td class=\"border px-4 py-2\">${ order.address }</td>\r\n                <td class=\"border px-4 py-2\">\r\n                    <div class=\"inline-block relative w-64\">\r\n                        <form action=\"/admin/order/status\" method=\"POST\">\r\n                            <input type=\"hidden\" name=\"orderId\" value=\"${ order._id }\">\r\n                            <select name=\"status\" onchange=\"this.form.submit()\"\r\n                                class=\"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\">\r\n                                <option value=\"order_placed\"\r\n                                    ${ order.status === 'order_placed' ? 'selected' : '' }>\r\n                                    Placed</option>\r\n                                <option value=\"confirmed\" ${ order.status === 'confirmed' ? 'selected' : '' }>\r\n                                    Confirmed</option>\r\n                                <option value=\"prepared\" ${ order.status === 'prepared' ? 'selected' : '' }>\r\n                                    Prepared</option>\r\n                                <option value=\"delivered\" ${ order.status === 'delivered' ? 'selected' : '' }>\r\n                                    Delivered\r\n                                </option>\r\n                                <option value=\"completed\" ${ order.status === 'completed' ? 'selected' : '' }>\r\n                                    Completed\r\n                                </option>\r\n                            </select>\r\n                        </form>\r\n                        <div\r\n                            class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\r\n                            <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\"\r\n                                viewBox=\"0 0 20 20\">\r\n                                <path\r\n                                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\r\n                            </svg>\r\n                        </div>\r\n                    </div>\r\n                </td>\r\n                <td class=\"border px-4 py-2\">\r\n                    ${ moment(order.createdAt).format('hh:mm A') }\r\n                </td>\r\n                <td class=\"border px-4 py-2\">\r\n                    ${ order.paymentStatus ? 'paid' : 'Not paid' }\r\n                </td>\r\n            </tr>\r\n        `\r\n        }).join('')\r\n    }\r\n}\r\n\r\nmodule.exports = initAdmin"]}